{% extends "base.html" %}
{% block content %}
<section class="panel">
  <h2>Create SKU Code</h2>
  <form id="ingredient-form">
    <div class="grid">
      <label>Category code
        <select name="category_code" required>
          <option value="0">0 - Seaweed</option>
          <option value="1">1 - Starch</option>
          <option value="2">2 - Fibre</option>
          <option value="3">3 - Plasticiser</option>
          <option value="4">4 - Roll</option>
          <option value="5">5 - Oil and Wax</option>
          <option value="6">6 - Mix</option>
          <option value="7">7 - Pellet</option>
          <option value="8">8 - Additives</option>
          <option value="9">9 - Other</option>
        </select>
      </label>
      <label><span class="trade-name-label">Trade name / <a class="inci-link" href="https://ec.europa.eu/growth/tools-databases/cosing/" target="_blank" rel="noopener">INCI</a></span>
        <input name="trade_name_inci" required />
      </label>
      <label>Supplier <input name="supplier" required /></label>
      <label>Spec grade <input name="spec_grade" /></label>
      <label>Format
        <select name="format" required>
          <option>Powder</option><option>Liquid</option><option>Pellet</option><option>Film</option><option>Granules</option><option>Water</option>
        </select>
      </label>
      <label>Pack size value <input name="pack_size_value" type="number" min="1" max="1000" required /></label>
      <label>Pack size unit
        <select name="pack_size_unit" required><option>kg</option><option>L</option></select>
      </label>
      <label>MSDS (PDF, optional)
        <input type="file" name="msds_file" accept="application/pdf" />
      </label>
    </div>
    <button type="submit">Create SKU Code</button>
    <p id="ingredient-form-status"></p>
  </form>
</section>

<section class="panel">
  <h2>Ingredient SKUs</h2>
  <!-- Inline actions group keeps filter controls aligned and responsive. -->
  <form method="get" action="/ingredients" class="inline-actions">
    <label>Lookup SKU / ingredient
      <input type="text" name="q" value="{{ q }}" placeholder="Search SKU, trade name, supplier" />
    </label>
    <button type="submit">Filter</button>
    <a href="/ingredients">Clear</a>
  </form>
  <table>
    <thead><tr><th>SKU</th><th>Trade name</th><th>Supplier</th><th>Spec / Grade</th><th>Format</th><th>Pack</th><th>Owner</th><th>MSDS</th><th>Actions</th></tr></thead>
    <tbody>
      {% for item in items %}
      <tr>
        <td>{{ item.sku }}</td><td>{{ item.trade_name_inci }}</td><td>{{ item.supplier }}</td><td>{{ item.spec_grade or "" }}</td><td>{{ item.format }}</td><td>{{ item.pack_size_value }} {{ item.pack_size_unit }}</td>
        <td>{{ item.created_by or "" }}</td>
        <td>{% if item.msds_object_path %}<a href="/ingredients/{{ item.sku }}/msds">MSDS</a>{% else %}None{% endif %}</td>
        <td><a href="/ingredients/{{ item.sku }}/edit">Edit</a></td>
      </tr>
      {% else %}<tr><td colspan="9">No ingredients yet.</td></tr>{% endfor %}
    </tbody>
  </table>
</section>
{% endblock %}
